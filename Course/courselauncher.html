<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <meta charset="utf-8" />

  <script src="../scorm-api.js"></script>
  <title>
      EVERFI: Course Launcher
    </title>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <script src="../shared_files/scripts/jqueryv1_min.js" type="text/javascript">
    </script>
    <script src="../shared_files/scripts/apiwrapper_1.2.js" type="text/javascript">
    </script>
    <script src="../shared_files/scripts/coursefunctions_1.2.js" type="text/javascript">
    </script>
    <style type="text/css">
      .content {
        font-size:20px;
        font-family:Arial, Helvetica, sans-serif;
        line-height:35px;
        color:#0077B9
      } .err
      {
        color:#f50000
      }
      body {
        margin: 0;
        width: 100vw;
        height: 100vh;
      }
      #content-frame {
        width: 100%;
        height: 100%;
      }
    </style>
    <script language="javascript" type="text/javascript">
      var isInitialized = initialize();
      var learnerId = "";
      var learnerName = "";
      var complianceUrl = "https://compliance.fifoundry.net";
      var scorm_token = "a2666d83ef14765da80371756747ddf7";
      var location_id = "18341";
      var content_id = "aecea74f-5dc5-4e84-b5a1-f28ac0b560e8";
      var role = "supervisor";
      var business_line = "corporate-compliance";
      var package_id = "78b9f97e-f1a0-42ef-927d-0c7a46b3175b";

      $(document).ready(function () {
        if (isInitialized || isInitialized == "true") {
          window.addEventListener("message", receiveMessage, false);

          learnerId = retrieveDataValue("cmi.core.student_id");
          learnerName = retrieveDataValue("cmi.core.student_name");

          if (scorm_token && location_id && content_id && business_line && learnerId && learnerName && package_id) {
            var src = complianceUrl +
                      "/student/scorm?sso_id=" + encodeURIComponent(learnerId) +
                      "&scorm_token=" + encodeURIComponent(scorm_token) +
                      "&name=" + encodeURIComponent(learnerName) +
                      "&location_id=" + encodeURIComponent(location_id) +
                      "&content_id=" + encodeURIComponent(content_id) +
                      "&role=" + encodeURIComponent(role) +
                      "&business_line=" + encodeURIComponent(business_line) +
                      "&package_id=" + encodeURIComponent(package_id);
            document.getElementById("content-frame").src = src;
          } else {
            displayMessage(100);
          }
        } else {
          displayMessage(100);
        }
      });
    </script>
  </head>
  <body>
    <iframe id="content-frame" border="0" frameborder="0" allowfullscreen msallowfullscreen webkitallowfullscreen></iframe>
  </body>
</html>
